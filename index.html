<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Italian Game Chess Opening Trainer - 26+ Variasi">
    <title>Italian Game Master Trainer</title>
    <link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{font-family:'Segoe UI',Tahoma,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;padding:20px}
        .container{max-width:1400px;margin:0 auto;background:#fff;border-radius:20px;padding:30px;box-shadow:0 20px 60px rgba(0,0,0,.3)}
        h1{text-align:center;color:#333;margin-bottom:10px;font-size:2.5em}
        .subtitle{text-align:center;color:#666;margin-bottom:30px;font-size:1.1em}
        .main-content{display:grid;grid-template-columns:500px 1fr;gap:30px;margin-bottom:30px}
        .board-container{display:flex;flex-direction:column;align-items:center}
        #myBoard{width:500px;margin-bottom:20px}
        .hint-from{box-shadow:inset 0 0 0 5px rgba(255,193,7,.9)!important;background-color:rgba(255,193,7,.4)!important}
        .hint-to{box-shadow:inset 0 0 0 5px rgba(40,167,69,.9)!important;background-color:rgba(40,167,69,.4)!important}
        .selected-piece{box-shadow:inset 0 0 0 5px rgba(0,123,255,.8)!important;background-color:rgba(0,123,255,.2)!important}
        .variation-info{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);padding:20px;border-radius:12px;margin-top:15px;border-left:5px solid #667eea;box-shadow:0 3px 10px rgba(0,0,0,.1)}
        .variation-info h4{color:#667eea;margin-bottom:10px;font-size:1.1em}
        .variation-info p{color:#555;line-height:1.6;font-size:.95em}
        .info-panel{background:#f8f9fa;padding:25px;border-radius:15px;box-shadow:0 4px 15px rgba(0,0,0,.1);max-height:800px;overflow-y:auto}
        .mode-selector{display:flex;gap:10px;margin-bottom:25px;flex-wrap:wrap}
        .mode-btn{flex:1;padding:12px 20px;border:2px solid #667eea;background:#fff;color:#667eea;border-radius:8px;cursor:pointer;font-weight:700;transition:all .3s;min-width:120px}
        .mode-btn:hover{background:#667eea;color:#fff;transform:translateY(-2px)}
        .mode-btn.active{background:#667eea;color:#fff}
        .stats{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:25px}
        .stat-card{background:#fff;padding:15px;border-radius:10px;text-align:center;box-shadow:0 2px 8px rgba(0,0,0,.1)}
        .stat-label{color:#666;font-size:.9em;margin-bottom:5px}
        .stat-value{color:#667eea;font-size:1.8em;font-weight:700}
        .move-history{background:#fff;padding:20px;border-radius:10px;max-height:180px;overflow-y:auto;margin-bottom:20px}
        .move-history h3{color:#333;margin-bottom:15px}
        .hint-box{background:#fff3cd;border-left:4px solid #ffc107;padding:15px;border-radius:8px;margin-bottom:20px;display:none}
        .hint-box.show{display:block}
        .feedback{padding:15px;border-radius:8px;margin-bottom:20px;text-align:center;font-weight:700;display:none}
        .feedback.correct{background:#d4edda;color:#155724;border:2px solid #28a745;display:block}
        .feedback.wrong{background:#f8d7da;color:#721c24;border:2px solid #dc3545;display:block}
        .controls{display:flex;gap:10px;flex-wrap:wrap}
        .btn{flex:1;padding:12px 25px;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:all .3s;min-width:100px}
        .btn-primary{background:#28a745;color:#fff}
        .btn-primary:hover{background:#218838;transform:translateY(-2px)}
        .btn-secondary{background:#6c757d;color:#fff}
        .btn-secondary:hover{background:#5a6268;transform:translateY(-2px)}
        .btn-hint{background:#ffc107;color:#333}
        .btn-hint:hover{background:#e0a800;transform:translateY(-2px)}
        .btn-danger{background:#dc3545;color:#fff}
        .btn-danger:hover{background:#c82333;transform:translateY(-2px)}
        .variation-list{background:#fff;padding:20px;border-radius:10px}
        .variation-list h3{color:#333;margin-bottom:15px}
        .category-title{color:#667eea;font-weight:700;margin-top:15px;margin-bottom:10px;padding:5px 0;border-bottom:2px solid #667eea}
        .variation-item{padding:12px;margin-bottom:8px;background:#f8f9fa;border-radius:5px;cursor:pointer;transition:all .3s;border-left:4px solid transparent}
        .variation-item:hover{background:#e9ecef;transform:translateX(5px);border-left-color:#667eea}
        .variation-item.active{background:#e7f3ff;border-left-color:#007bff}
        .variation-item strong{display:block;color:#333;margin-bottom:5px}
        .variation-item small{color:#666;font-size:.85em}
        .difficulty{display:inline-block;padding:2px 8px;border-radius:4px;font-size:.75em;margin-left:8px}
        .difficulty.beginner{background:#d4edda;color:#155724}
        .difficulty.intermediate{background:#fff3cd;color:#856404}
        .difficulty.advanced{background:#f8d7da;color:#721c24}
        .search-box{margin-bottom:20px}
        .search-box input{width:100%;padding:12px;border:2px solid #ddd;border-radius:8px;font-size:1em}
        .search-box input:focus{outline:0;border-color:#667eea}
        @media (max-width:1200px){.main-content{grid-template-columns:1fr}#myBoard{width:100%;max-width:500px}}
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ôüÔ∏è Italian Game Master Trainer</h1>
        <p class="subtitle">Kuasai 26 variasi pembukaan Italian Game seperti Grandmaster!</p>
        
        <div class="mode-selector">
            <button class="mode-btn active" onclick="setMode('learn')">üìö Learn</button>
            <button class="mode-btn" onclick="setMode('practice')">üí™ Practice</button>
            <button class="mode-btn" onclick="setMode('drill')">‚ö° Drill</button>
        </div>
        
        <div class="main-content">
            <div class="board-container">
                <div id="myBoard"></div>
                <div class="controls">
                    <button class="btn btn-secondary" onclick="resetGame()">üîÑ Reset</button>
                    <button class="btn btn-danger" onclick="undoMove()">‚Ü©Ô∏è Undo</button>
                    <button class="btn btn-hint" onclick="showHint()">üí° Hint</button>
                    <button class="btn btn-primary" onclick="nextExercise()">‚ñ∂Ô∏è Next</button>
                </div>
                <div class="variation-info" id="variationInfo">
                    <h4>üìñ Tentang Variasi Ini</h4>
                    <p id="variationHistory">Loading...</p>
                </div>
            </div>
            
            <div class="info-panel">
                <div class="stats">
                    <div class="stat-card"><div class="stat-label">Benar</div><div class="stat-value" id="correct">0</div></div>
                    <div class="stat-card"><div class="stat-label">Salah</div><div class="stat-value" id="wrong">0</div></div>
                    <div class="stat-card"><div class="stat-label">Akurasi</div><div class="stat-value" id="accuracy">0%</div></div>
                </div>
                <div class="feedback" id="feedback"></div>
                <div class="hint-box" id="hintBox"><strong>üí° Hint:</strong> <span id="hintText"></span></div>
                <div class="move-history"><h3>üìú Riwayat Gerakan</h3><div id="moveList"></div></div>
                <div class="variation-list">
                    <h3>üéØ 26 Variasi Italian Game</h3>
                    <div class="search-box"><input type="text" id="searchInput" placeholder="üîç Cari variasi..." onkeyup="filterVariations()"></div>
                    <div id="variationsList"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
    <script>
let board,game=new Chess(),currentMode='learn',stats={correct:0,wrong:0},currentVariation='giuoco-piano-classical',selectedSquare=null,moveHistory=[],currentMoveIndex=0;

const varData={
'giuoco-piano-classical':{n:'Giuoco Piano - Classical',d:'beginner',h:'Giuoco Piano adalah salah satu pembukaan tertua dalam sejarah catur, pertama kali dianalisis oleh Pedro Damiano dari Portugal pada tahun 1512. Pembukaan ini dikembangkan oleh Gioachino Greco pada awal abad ke-17. Nama "Giuoco Piano" berarti "permainan yang tenang" dalam bahasa Italia.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','c3','Nf6','d3','d6','O-O','O-O'],ht:['e4 kontrol pusat','e5 respons','Nf3 serang e5','Nc6 bertahan','Bc4 Italian Game','Bc5 Giuoco Piano','c3 persiapkan d4','Nf6 kembangkan','d3 posisi solid','d6 perkuat','Castling raja aman','Hitam castling selesai'],e:['e4 pembuka klasik','e5 simetris','Nf3 serang e5','Nc6 bertahan','Bc4 Italian target f7','Bc5 Giuoco Piano','c3 persiapkan d4','Nf6 natural','d3 Pianissimo','d6 perkuat','O-O raja aman','O-O selesai seimbang']},
'giuoco-pianissimo':{n:'Giuoco Pianissimo',d:'beginner',h:'Giuoco Pianissimo dikembangkan pada abad ke-20 sebagai varian lebih tenang dari Giuoco Piano. Nama "Pianissimo" berarti "sangat tenang", mencerminkan pendekatan posisional yang sabar.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','d3','Nf6','O-O','O-O','Re1','d6'],ht:['e4 kontrol pusat','e5 respons','Nf3 serang e5','Nc6 bertahan','Bc4 Italian','Bc5 Piano','d3 Pianissimo!','Nf6 kembangkan','O-O raja aman','Hitam castling','Re1 persiapan','d6 selesai'],e:['e4 pembuka','e5 simetris','Nf3 tekanan','Nc6 solid','Bc4 target f7','Bc5 cerminkan','d3 sangat tenang','Nf6 natural','O-O aman','O-O castling','Re1 persiapan e5','d6 solid selesai']},
'giuoco-pianissimo-italian-four':{n:'Italian Four Knights',d:'intermediate',h:'Italian Four Knights menggabungkan Italian Game dan Four Knights Game, populer pada abad ke-20 untuk sistem solid namun fleksibel.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','d3','Nf6','Nc3','O-O','O-O','d6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','d3 Pianissimo','Nf6 kembangkan','Nc3 Four Knights!','Hitam castling','Putih castling','d6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','d3 Pianissimo','Nf6 pengembangan','Nc3 Four Knights','O-O aman','O-O castling','d6 solid selesai']},
'giuoco-pianissimo-canal':{n:'Canal Variation',d:'intermediate',h:'Canal Variation dinamai menurut GM Esteban Canal (1896-1981) dari Peru-Italia. Bg5 menciptakan pin pada knight f6, memberikan tekanan taktis.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','d3','Nf6','Nc3','d6','Bg5','h6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','d3 Pianissimo','Nf6 kembangkan','Nc3 Four Knights','d6 solid','Bg5 Canal!','h6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','d3 Pianissimo','Nf6 pengembangan','Nc3 Four Knights','d6 perkuat','Bg5 pin knight','h6 usir selesai']},
'center-attack':{n:'Center Attack',d:'intermediate',h:'Center Attack adalah varian agresif yang populer pada abad ke-19, dengan d4 cepat untuk membuka pusat. Master seperti Anderssen dan Morphy menggunakan ide serupa.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','c3','Nf6','d4','exd4','cxd4','Bb4+'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','c3 persiapan','Nf6 kembangkan','d4 Center Attack!','exd4 ambil','cxd4 rebut','Bb4+ selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','c3 persiapan d4','Nf6 tekanan e4','d4 buka pusat agresif','exd4 terima','cxd4 pertahankan','Bb4+ check selesai']},
'grecos-attack':{n:"Greco's Attack",d:'advanced',h:'Dinamai menurut Gioachino Greco (1600-1634), master Italia yang dijuluki "Il Calabrese". Nc3 setelah Bb4+ mengorbankan pawn e4 untuk inisiatif.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','c3','Nf6','d4','exd4','cxd4','Bb4+','Nc3','Nxe4','O-O'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','c3 persiapan','Nf6 kembangkan','d4 pusat','exd4 ambil','cxd4 rebut','Bb4+ check','Nc3 Greco!','Nxe4 ambil','O-O selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','c3 persiapan','Nf6 pengembangan','d4 Center Attack','exd4 terima','cxd4 rebut','Bb4+ check','Nc3 Greco korban e4','Nxe4 ambil','O-O kompensasi selesai']},
'birds-attack':{n:"Bird's Attack",d:'advanced',h:'Bird\'s Attack dinamai menurut Henry Edward Bird (1829-1908), master Inggris dengan gaya kreatif. Serangan queenside b4 adalah pendekatan inovatif.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','c3','Nf6','b4','Bb6','d3','d6','a4','a5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','c3 persiapan','Nf6 kembangkan','b4 Bird!','Bb6 mundur','d3 solid','d6 perkuat','a4 ekspansi','a5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','c3 persiapan','Nf6 pengembangan','b4 ekspansi queenside','Bb6 aman','d3 solid','d6 perkuat','a4 ekspansi','a5 fiksir selesai']},
'evans-gambit-accepted':{n:'Evans Gambit Accepted',d:'advanced',h:'Evans Gambit ditemukan oleh William Davies Evans tahun 1820-an. Gambit ini sangat populer pada abad ke-19, dimainkan oleh Anderssen dan Morphy dalam kejuaraan dunia.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','b4','Bxb4','c3','Ba5','d4','d6','Qb3','Qd7'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','b4 Evans!','Bxb4 terima','c3 paksa','Ba5 mundur','d4 dominasi','d6 bertahan','Qb3 serang','Qd7 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','b4 Evans korban pawn','Bxb4 terima','c3 paksa mundur','Ba5 aman','d4 dominasi pusat','d6 solid','Qb3 tekanan f7 b7','Qd7 bertahan selesai']},
'evans-gambit-declined':{n:'Evans Gambit Declined',d:'intermediate',h:'Evans Gambit Declined muncul sebagai respons praktis. Bb6 menolak gambit dengan posisi lebih aman, populer akhir abad ke-19.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','b4','Bb6','a4','a6','Nc3','Nf6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','b4 Evans','Bb6 tolak!','a4 cegah','a6 solid','Nc3 kembangkan','Nf6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','b4 Evans','Bb6 tolak aman','a4 cegah b5','a6 persiapan','Nc3 pengembangan','Nf6 seimbang selesai']},
'evans-mayet':{n:'Mayet Defense',d:'advanced',h:'Mayet Defense dinamai Carl Mayet (1810-1868), master Jerman. Bf8 mengembalikan bishop setelah mengambil b4, mengorbankan tempo untuk struktur lebih baik.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','b4','Bxb4','c3','Bf8','d4','d6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','b4 Evans','Bxb4 terima','c3 paksa','Bf8 Mayet!','d4 pusat','d6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','b4 Evans','Bxb4 terima','c3 paksa','Bf8 kembali reset','d4 dominasi','d6 solid selesai']},
'evans-morphy':{n:'Morphy Attack',d:'advanced',h:'Morphy Attack terkait Paul Morphy (1837-1884), juara Amerika. O-O cepat mengorbankan material untuk serangan, gaya era romantis catur.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','b4','Bxb4','c3','Ba5','d4','exd4','O-O','dxc3'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','b4 Evans','Bxb4 terima','c3 paksa','Ba5 mundur','d4 serang','exd4 terima','O-O Morphy!','dxc3 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','b4 Evans','Bxb4 terima','c3 paksa','Ba5 mundur','d4 buka','exd4 terima','O-O korban material','dxc3 dua pawn lebih selesai']},
'two-knights-main':{n:'Two Knights Defense',d:'intermediate',h:'Two Knights Defense adalah pertahanan tertua dan solid terhadap Italian Game. Main Line dengan d3 menghindari komplikasi Ng5, populer di semua level.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','d3','Be7','O-O','O-O','Re1','d6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights!','d3 tenang','Be7 kembangkan','O-O aman','Hitam castling','Re1 persiapan','d6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 lebih aktif','d3 tenang hindari komplikasi','Be7 solid','O-O aman','O-O castling','Re1 persiapan e5','d6 solid selesai']},
'fried-liver':{n:'Fried Liver Attack',d:'advanced',h:'Fried Liver Attack dari tahun 1610, pertandingan Polerio vs Domenico. Nama "Fried Liver" dari Italia "Fegatello" - metafora raja hitam "dimasak" dalam jaring mating.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','Ng5','d5','exd5','Nxd5','Nxf7','Kxf7','Qf3+','Ke6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights','Ng5 serang f7!','d5 counter','exd5 ambil','Nxd5 ambil','Nxf7 Fried Liver!','Kxf7 paksa','Qf3+ check','Ke6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 Two Knights','Ng5 ancam Nxf7','d5 counter','exd5 ambil','Nxd5 kembali','Nxf7 korban knight serangan','Kxf7 paksa','Qf3+ tidak aman','Ke6 raja tengah berbahaya selesai']},
'traxler':{n:'Traxler Counterattack',d:'advanced',h:'Traxler Counterattack dinamai Karel Traxler (1866-1936), master Ceko. Counter-gambit berani dengan Bc5 lalu Bxf2+ menciptakan serangan balik spektakuler.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','Ng5','Bc5','Nxf7','Bxf2+','Kf1','Qe7'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights','Ng5 serang','Bc5 Traxler!','Nxf7 ambil','Bxf2+ counter!','Kf1 paksa','Qe7 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 Two Knights','Ng5 ancam f7','Bc5 Traxler aktif','Nxf7 ambil','Bxf2+ counter-sacrifice','Kf1 raja bergerak','Qe7 tekanan besar selesai']},
'two-knights-modern':{n:'Modern Bishop Opening',d:'intermediate',h:'Modern Bishop Opening dikembangkan abad ke-20, menggabungkan Scotch dan Italian Game dengan d4 cepat untuk posisi dinamis.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','d4','exd4','O-O','Nxe4','Re1','d5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights','d4 buka','exd4 terima','O-O aman','Nxe4 ambil','Re1 pin','d5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 Two Knights','d4 Modern approach','exd4 terima','O-O castling sebelum komplikasi','Nxe4 ambil','Re1 pin knight','d5 bertahan selesai']},
'jerome-gambit':{n:'Jerome Gambit',d:'advanced',h:'Jerome Gambit oleh Alonzo Wheeler Jerome tahun 1874 dari Illinois. Meskipun objektif lemah, berbahaya praktis melawan lawan tidak siap.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','Bxf7+','Kxf7','Nxe5+','Nxe5','d4','Bxd4','Qxd4'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','Bxf7+ Jerome!','Kxf7 paksa','Nxe5+ check','Nxe5 ambil','d4 serang','Bxd4 ambil','Qxd4 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','Bxf7+ korban bishop berisiko','Kxf7 paksa','Nxe5+ check tempo','Nxe5 paksa','d4 serang bishop','Bxd4 ambil pawn','Qxd4 queen aktif selesai']},
'rousseau-gambit':{n:'Rousseau Gambit',d:'advanced',h:'Rousseau Gambit dinamai Eugene Rousseau, pemain Prancis abad ke-19. f5 sangat awal merusak struktur putih, gaya romantis catur.',m:['e4','e5','Nf3','Nc6','Bc4','f5','exf5','e4','Qe2','Qe7','Ng5','d5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','f5 Rousseau!','exf5 terima','e4 maju','Qe2 pin','Qe7 bertahan','Ng5 tekanan','d5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','f5 Rousseau agresif','exf5 terima','e4 maju agresif','Qe2 pin pawn','Qe7 bertahan','Ng5 tekanan f7','d5 counter selesai']},
'scotch-gambit':{n:'Scotch Gambit',d:'intermediate',h:'Scotch Gambit menggabungkan Italian dan Scotch Game, dikembangkan Edinburgh awal abad ke-19. Kasparov sesekali gunakan untuk posisi tajam.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','d4','exd4','O-O','Nxe4','Re1','d5','Bxd5','Qxd5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights','d4 Scotch!','exd4 terima','O-O castling','Nxe4 ambil','Re1 pin','d5 bertahan','Bxd5 ambil','Qxd5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 Two Knights','d4 Scotch Gambit','exd4 terima','O-O kompensasi','Nxe4 ambil','Re1 pin knight','d5 bertahan','Bxd5 ambil pawn','Qxd5 aktif selesai']},
'deutz-gambit':{n:'Deutz Gambit',d:'advanced',h:'Deutz Gambit dari kota Deutz (Cologne) abad ke-19. O-O sebelum d4 lebih hati-hati dari Rosentreter, transisi era romantis ke posisional.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','O-O','Nf6','d4','exd4','e5','Ng4'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','O-O castle','Nf6 kembangkan','d4 Deutz!','exd4 terima','e5 maju','Ng4 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','O-O castling dulu','Nf6 pengembangan','d4 Deutz mirip Rosentreter','exd4 terima','e5 gain space','Ng4 terpaksa selesai']},
'rosentreter-gambit':{n:'Rosentreter Gambit',d:'advanced',h:'Rosentreter Gambit dinamai master Jerman abad ke-19. d4 langsung tanpa c3 mengorbankan pawn untuk development cepat dan inisiatif.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','d4','exd4','c3','Nf6','e5','d5','Bb5','Ne4'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 Piano','d4 langsung!','exd4 terima','c3 Rosentreter','Nf6 kembangkan','e5 maju','d5 counter','Bb5 pin','Ne4 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Bc5 Piano','d4 langsung tanpa c3','exd4 terima','c3 Rosentreter','Nf6 pengembangan','e5 gain space','d5 counter pusat','Bb5 pin knight','Ne4 centralize selesai']},
'hungarian-defense':{n:'Hungarian Defense',d:'beginner',h:'Hungarian Defense dikembangkan master Hongaria abad ke-19. Be7 menghindari komplikasi taktis, prinsip posisional solid - pengembangan aman dan struktur sehat.',m:['e4','e5','Nf3','Nc6','Bc4','Be7','d4','exd4','Nxd4','Nf6','Nc3','O-O'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Be7 Hungarian!','d4 buka','exd4 terima','Nxd4 ambil','Nf6 kembangkan','Nc3 kembangkan','O-O selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Be7 Hungarian pasif solid','d4 buka','exd4 terima','Nxd4 recapture','Nf6 natural','Nc3 pengembangan','O-O aman solid selesai']},
'hungarian-tartakower':{n:'Tartakower Variation',d:'intermediate',h:'Tartakower Variation dinamai GM Savielly Tartakower (1887-1956), Polandia-Prancis. c3 setelah exd4 menciptakan posisi lebih kompleks dari Hungarian biasa.',m:['e4','e5','Nf3','Nc6','Bc4','Be7','d4','exd4','c3','Nf6','e5','Ne4','Bd5','Nc5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Be7 Hungarian','d4 buka','exd4 terima','c3 Tartakower','Nf6 kembangkan','e5 maju','Ne4 aktif','Bd5 aktif','Nc5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Be7 Hungarian','d4 buka','exd4 terima','c3 Tartakower','Nf6 pengembangan','e5 gain space','Ne4 square aktif','Bd5 diagonal panjang','Nc5 reposisi selesai']},
'paris-defense':{n:'Paris Defense',d:'beginner',h:'Paris Defense dari kota Paris abad ke-19, dikembangkan pemain Prancis. d6 memperkuat e5 dan persiapan bishop, filosofi pertahanan solid.',m:['e4','e5','Nf3','Nc6','Bc4','d6','d4','exd4','Nxd4','Nf6','Nc3','Be7'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','d6 Paris!','d4 buka','exd4 terima','Nxd4 ambil','Nf6 kembangkan','Nc3 kembangkan','Be7 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','d6 Paris pasif solid','d4 buka','exd4 terima','Nxd4 recapture','Nf6 pengembangan','Nc3 pengembangan','Be7 solid selesai']},
'blackburne-shilling':{n:'Blackburne Shilling',d:'advanced',h:'Blackburne Shilling Gambit dinamai Joseph Henry Blackburne (1841-1924), "The Black Death". Jebakan berbahaya - jika putih rakus ambil e5, hitam dapat serangan menghancurkan.',m:['e4','e5','Nf3','Nc6','Bc4','Nd4','Nxe5','Qg5','Nxf7','Qxg2','Rf1','Qxe4+','Be2','Nf3+'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nd4 jebakan!','Nxe5 ambil','Qg5 serang','Nxf7 ambil','Qxg2 ambil','Rf1 bertahan','Qxe4+ check','Be2 blok','Nf3+ selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nd4 jebakan pemula','Nxe5 kesalahan terlihat menang','Qg5 ancam g2 e5','Nxf7 coba menang','Qxg2 queen masuk','Rf1 coba bertahan','Qxe4+ check ancaman','Be2 satu-satunya','Nf3+ fork kalah selesai']},
'four-knights-italian':{n:'Four Knights Italian',d:'intermediate',h:'Four Knights Italian menggabungkan Four Knights dan Italian Game. Populer awal abad ke-20, dimainkan Lasker dan Capablanca untuk posisi seimbang.',m:['e4','e5','Nf3','Nc6','Bc4','Nf6','Nc3','Nxe4','Nxe4','d5','Bd3','dxe4','Bxe4','Bd6'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Nf6 Two Knights','Nc3 Four Knights','Nxe4 ambil','Nxe4 ambil balik','d5 serang','Bd3 mundur','dxe4 ambil','Bxe4 ambil','Bd6 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 pertahanan','Bc4 Italian','Nf6 Two Knights','Nc3 Four Knights','Nxe4 ambil','Nxe4 recapture','d5 serang knight bishop','Bd3 mundur','dxe4 ambil knight','Bxe4 recapture','Bd6 pengembangan selesai']},
'symmetrical-italian':{n:'Symmetrical Italian',d:'beginner',h:'Symmetrical Italian Game dengan simetri total hingga langkah tertentu. Simetri pecah saat salah satu sisi mencoba inisiatif, posisi seimbang untuk pemula.',m:['e4','e5','Nf3','Nc6','Bc4','Bc5','Nc3','Nf6','d3','d6','Bg5','h6','Bh4','g5'],ht:['e4 pembuka','e5 respons','Nf3 serang','Nc6 bertahan','Bc4 Italian','Bc5 simetris','Nc3 kembangkan','Nf6 simetris','d3 solid','d6 simetris','Bg5 pin','h6 usir','Bh4 mundur','g5 selesai'],e:['e4 pusat','e5 simetris','Nf3 pengembangan','Nc6 simetris','Bc4 Italian','Bc5 simetris total','Nc3 pengembangan','Nf6 tetap simetris','d3 solid','d6 masih simetris','Bg5 pecah simetri pin','h6 usir bishop','Bh4 mundur','g5 kejar pecah selesai']}
};

const varList=[
{k:'giuoco-piano-classical',n:'Giuoco Piano - Classical',d:'beginner',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.c3',c:'Giuoco Piano'},
{k:'giuoco-pianissimo',n:'Giuoco Pianissimo',d:'beginner',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.d3',c:'Giuoco Piano'},
{k:'giuoco-pianissimo-italian-four',n:'Italian Four Knights',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.d3 Nf6 5.Nc3',c:'Giuoco Piano'},
{k:'giuoco-pianissimo-canal',n:'Canal Variation',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.d3 Nf6 5.Nc3 d6 6.Bg5',c:'Giuoco Piano'},
{k:'center-attack',n:'Center Attack',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.c3 Nf6 5.d4',c:'Giuoco Piano'},
{k:'grecos-attack',n:"Greco's Attack",d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.c3 Nf6 5.d4 exd4 6.cxd4',c:'Giuoco Piano'},
{k:'birds-attack',n:"Bird's Attack",d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.c3 Nf6 5.b4',c:'Giuoco Piano'},
{k:'evans-gambit-accepted',n:'Evans Gambit Accepted',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5',c:'Evans Gambit'},
{k:'evans-gambit-declined',n:'Evans Gambit Declined',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bb6',c:'Evans Gambit'},
{k:'evans-mayet',n:'Mayet Defense',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Bf8',c:'Evans Gambit'},
{k:'evans-morphy',n:'Morphy Attack',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.b4 Bxb4 5.c3 Ba5 6.d4',c:'Evans Gambit'},
{k:'two-knights-main',n:'Two Knights Defense',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.d3',c:'Two Knights'},
{k:'fried-liver',n:'Fried Liver Attack',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.Ng5 d5 5.exd5 Nxd5 6.Nxf7',c:'Two Knights'},
{k:'traxler',n:'Traxler Counterattack',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.Ng5 Bc5',c:'Two Knights'},
{k:'two-knights-modern',n:'Modern Bishop Opening',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.d4',c:'Two Knights'},
{k:'jerome-gambit',n:'Jerome Gambit',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.Bxf7+',c:'Other Gambits'},
{k:'rousseau-gambit',n:'Rousseau Gambit',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 f5',c:'Other Gambits'},
{k:'scotch-gambit',n:'Scotch Gambit',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.d4 exd4 5.O-O',c:'Other Gambits'},
{k:'deutz-gambit',n:'Deutz Gambit',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.O-O Nf6 5.d4',c:'Other Gambits'},
{k:'rosentreter-gambit',n:'Rosentreter Gambit',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.d4',c:'Other Gambits'},
{k:'hungarian-defense',n:'Hungarian Defense',d:'beginner',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Be7',c:'Alternative Defenses'},
{k:'hungarian-tartakower',n:'Tartakower Variation',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Be7 4.d4 exd4 5.c3',c:'Alternative Defenses'},
{k:'paris-defense',n:'Paris Defense',d:'beginner',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 d6',c:'Alternative Defenses'},
{k:'blackburne-shilling',n:'Blackburne Shilling',d:'advanced',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nd4',c:'Alternative Defenses'},
{k:'four-knights-italian',n:'Four Knights Italian',d:'intermediate',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Nf6 4.Nc3',c:'Other Lines'},
{k:'symmetrical-italian',n:'Symmetrical Italian',d:'beginner',m:'1.e4 e5 2.Nf3 Nc6 3.Bc4 Bc5 4.Nc3 Nf6 5.d3 d6',c:'Other Lines'}
];

function renderVarList(){
let categories={};
varList.forEach(v=>{
if(!categories[v.c])categories[v.c]=[];
categories[v.c].push(v);
});
let h='';
const icons={'Giuoco Piano':'üéº','Evans Gambit':'‚öîÔ∏è','Two Knights':'üé≠','Other Gambits':'üî•','Alternative Defenses':'üõ°Ô∏è','Other Lines':'‚ôû'};
for(let cat in categories){
h+=`<div class="category-title">${icons[cat]||''} ${cat}</div>`;
categories[cat].forEach(v=>{
const dLabel=v.d=='beginner'?'Pemula':v.d=='intermediate'?'Menengah':'Lanjut';
h+=`<div class="variation-item" onclick="loadVariation('${v.k}')"><strong>${v.n} <span class="difficulty ${v.d}">${dLabel}</span></strong><small>${v.m}</small></div>`;
});
}
document.getElementById('variationsList').innerHTML=h;
}

function parseMove(m){
const tg=new Chess(game.fen()),mv=tg.move(m);
return mv?{from:mv.from,to:mv.to}:null;
}

function showVisualHint(){
removeHighlights();
if(currentMode!='learn'||currentMoveIndex>=varData[currentVariation].m.length)return;
if(currentMoveIndex%2!=0)return;
const c=parseMove(varData[currentVariation].m[currentMoveIndex]);
if(c){
$('#myBoard .square-'+c.from).addClass('hint-from');
$('#myBoard .square-'+c.to).addClass('hint-to');
}
}

function removeHighlights(){$('#myBoard .square-55d63').removeClass('hint-from hint-to selected-piece')}

function onSquareClick(sq){
if(game.turn()!='w')return;
if(selectedSquare){
const mv=game.move({from:selectedSquare,to:sq,promotion:'q'});
if(mv){processPlayerMove(mv)}else{
const p=game.get(sq);
if(p&&p.color=='w'){selectedSquare=sq;removeHighlights();$('#myBoard .square-'+sq).addClass('selected-piece');showVisualHint()}
else{selectedSquare=null;removeHighlights();showVisualHint()}
}
}else{
const p=game.get(sq);
if(p&&p.color=='w'){selectedSquare=sq;removeHighlights();$('#myBoard .square-'+sq).addClass('selected-piece');showVisualHint()}
}
}

function onDragStart(src,pc){return!game.game_over()&&game.turn()=='w'&&pc.search(/^b/)==-1}

function onDrop(src,tgt){
selectedSquare=null;removeHighlights();
if(game.turn()!='w')return'snapback';
const mv=game.move({from:src,to:tgt,promotion:'q'});
if(!mv){showVisualHint();return'snapback'}
processPlayerMove(mv);
}

function processPlayerMove(mv){
const exp=varData[currentVariation].m[currentMoveIndex];
if(mv.san==exp||mv.lan==exp){
stats.correct++;
moveHistory.push({fen:game.fen(),moveIndex:currentMoveIndex});
showFeedback('correct','‚úÖ '+varData[currentVariation].e[currentMoveIndex]);
currentMoveIndex++;
updateStats();
updateMoveHistory();
setTimeout(()=>{
if(currentMoveIndex<varData[currentVariation].m.length){
makeComputerMove();
}else{
removeHighlights();
$('#hintBox').removeClass('show');
showFeedback('correct','üéâ Selamat! Variasi '+varData[currentVariation].n+' selesai!');
}
},600);
}else{
stats.wrong++;
showFeedback('wrong','‚ùå Salah! Benar: '+exp+'. '+varData[currentVariation].e[currentMoveIndex]);
updateStats();
game.undo();
board.position(game.fen());
setTimeout(()=>showVisualHint(),500);
}
}

function makeComputerMove(){
if(currentMoveIndex>=varData[currentVariation].m.length)return;
const mv=game.move(varData[currentVariation].m[currentMoveIndex]);
if(mv){
moveHistory.push({fen:game.fen(),moveIndex:currentMoveIndex});
board.position(game.fen());
currentMoveIndex++;
updateMoveHistory();
setTimeout(()=>{
if(currentMoveIndex<varData[currentVariation].ht.length){
$('#hintText').text(varData[currentVariation].ht[currentMoveIndex]);
if(currentMode=='learn'){
$('#hintBox').addClass('show');
showVisualHint();
}
}else{
if(currentMoveIndex>=varData[currentVariation].m.length){
removeHighlights();
$('#hintBox').removeClass('show');
showFeedback('correct','üéâ Selamat! Variasi '+varData[currentVariation].n+' selesai!');
}
}
},300);
}
}

function showFeedback(t,m){
const f=$('#feedback');
f.removeClass('correct wrong').addClass(t).text(m).show();
setTimeout(()=>f.fadeOut(),4000);
}

function updateStats(){
$('#correct').text(stats.correct);
$('#wrong').text(stats.wrong);
const tot=stats.correct+stats.wrong,acc=tot>0?Math.round((stats.correct/tot)*100):0;
$('#accuracy').text(acc+'%');
}

function updateMoveHistory(){
const h=game.history();
let html='';
for(let i=0;i<h.length;i+=2){
const n=Math.floor(i/2)+1;
html+=`<div>${n}. ${h[i]} ${h[i+1]||''}</div>`;
}
$('#moveList').html(html||'<em>Belum ada gerakan</em>');
}

function showHint(){
if(currentMode=='drill'){showFeedback('wrong','‚ùå Tidak ada hint di mode Drill!');return}
if(currentMoveIndex<varData[currentVariation].ht.length){
$('#hintText').text(varData[currentVariation].ht[currentMoveIndex]);
$('#hintBox').addClass('show');
showVisualHint();
setTimeout(()=>{$('#hintBox').removeClass('show');removeHighlights()},8000);
}else showFeedback('wrong','Tidak ada hint tersedia');
}

function undoMove(){
if(moveHistory.length<2){showFeedback('wrong','‚ùå Tidak ada langkah untuk di-undo!');return}
moveHistory.pop();
const ls=moveHistory.pop();
if(ls){
game.load(ls.fen);
board.position(game.fen());
currentMoveIndex=ls.moveIndex;
updateMoveHistory();
if(currentMode=='learn'&&currentMoveIndex<varData[currentVariation].ht.length){
$('#hintText').text(varData[currentVariation].ht[currentMoveIndex]);
$('#hintBox').addClass('show');
showVisualHint();
}
showFeedback('correct','‚Ü©Ô∏è Langkah berhasil di-undo');
}
}

function resetGame(){
game.reset();
board.start();
currentMoveIndex=0;
moveHistory=[];
selectedSquare=null;
removeHighlights();
$('#hintBox').removeClass('show');
$('#feedback').hide();
updateMoveHistory();
if(currentMode=='learn'&&varData[currentVariation].ht.length>0){
setTimeout(()=>{
$('#hintText').text(varData[currentVariation].ht[0]);
$('#hintBox').addClass('show');
showVisualHint();
},500);
}
}

function nextExercise(){
const keys=Object.keys(varData),ci=keys.indexOf(currentVariation),ni=(ci+1)%keys.length;
currentVariation=keys[ni];
$('.variation-item').removeClass('active').each(function(){
if($(this).attr('onclick').includes(currentVariation))$(this).addClass('active');
});
resetGame();
$('#variationHistory').text(varData[currentVariation].h);
showFeedback('correct','‚ñ∂Ô∏è Memuat: '+varData[currentVariation].n);
}

function setMode(m){
currentMode=m;
$('.mode-btn').removeClass('active').each(function(){
const bt=$(this).text().toLowerCase();
if((m=='learn'&&bt.includes('learn'))||(m=='practice'&&bt.includes('practice'))||(m=='drill'&&bt.includes('drill')))$(this).addClass('active');
});
resetGame();
const msg=m=='learn'?'üìö Mode Learn: Hint visual dan penjelasan':m=='practice'?'üí™ Mode Practice: Tanpa hint otomatis':'‚ö° Mode Drill: Tanpa bantuan!';
showFeedback('correct',msg);
}

function loadVariation(vk){
if(!varData[vk])return;
currentVariation=vk;
stats={correct:0,wrong:0};
updateStats();
$('.variation-item').removeClass('active').each(function(){
if($(this).attr('onclick').includes(vk))$(this).addClass('active');
});
resetGame();
$('#variationHistory').text(varData[vk].h);
showFeedback('correct','üéØ Memuat: '+varData[vk].n+' ('+varData[vk].m.length+' langkah)');
}

function filterVariations(){
const st=$('#searchInput').val().toLowerCase();
$('.variation-item').each(function(){
$(this).text().toLowerCase().includes(st)?$(this).show():$(this).hide();
});
}

board=Chessboard('myBoard',{
draggable:true,
position:'start',
onDragStart:onDragStart,
onDrop:onDrop,
onSnapEnd:()=>board.position(game.fen()),
pieceTheme:'https://chessboardjs.com/img/chesspieces/wikipedia/{piece}.png'
});

$('#myBoard').on('click','.square-55d63',function(){
const sq=$(this).attr('data-square');
if(sq)onSquareClick(sq);
});

$(document).ready(function(){
renderVarList();
updateStats();
$('.variation-item').first().addClass('active');
$('#variationHistory').text(varData[currentVariation].h);
if(currentMode=='learn'){
setTimeout(()=>{
$('#hintText').text(varData[currentVariation].ht[0]);
$('#hintBox').addClass('show');
showVisualHint();
},1000);
}
});
    </script>
</body>
</html>
